<div class="dialog-container">
    <h2 mat-dialog-title>
      <mat-icon class="dialog-icon">campaign</mat-icon>
      Add Announcement
    </h2>
  
    <mat-dialog-content>
      <form [formGroup]="announcementForm">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" required>
          <mat-hint>5-100 characters</mat-hint>
          <mat-error *ngIf="announcementForm.get('title')?.hasError('required')">
            This field is required
          </mat-error>
          <mat-error *ngIf="announcementForm.get('title')?.hasError('minlength')">
            Title must be at least 5 characters long
          </mat-error>
          <mat-error *ngIf="announcementForm.get('title')?.hasError('maxlength')">
            Title cannot exceed 100 characters
          </mat-error>
          <mat-error *ngIf="announcementForm.get('title')?.hasError('consecutiveSpaces')">
            Multiple consecutive spaces are not allowed
          </mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Content</mat-label>
          <textarea matInput formControlName="content" required rows="6"></textarea>
          <mat-hint>20-1000 characters</mat-hint>
          <mat-error *ngIf="announcementForm.get('content')?.hasError('required')">
            This field is required
          </mat-error>
          <mat-error *ngIf="announcementForm.get('content')?.hasError('minlength')">
            Content must be at least 20 characters long
          </mat-error>
          <mat-error *ngIf="announcementForm.get('content')?.hasError('maxlength')">
            Content cannot exceed 1000 characters
          </mat-error>
          <mat-error *ngIf="announcementForm.get('content')?.hasError('consecutiveSpaces')">
            Multiple consecutive spaces are not allowed
          </mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Club</mat-label>
          <mat-select formControlName="clubId">
            <mat-option *ngFor="let club of clubs" [value]="club.id_club">
              {{club.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="announcementForm.get('clubId')?.hasError('required')">
            This field is required
          </mat-error>
        </mat-form-field>
      </form>
    </mat-dialog-content>
  
    <mat-dialog-actions align="end">
      <button mat-stroked-button (click)="onCancel()">Cancel</button>
      <button 
        mat-flat-button 
        color="primary" 
        (click)="onSubmit()" 
        [disabled]="announcementForm.invalid || isSubmitting">
        <span *ngIf="!isSubmitting">Add</span>
        <mat-icon *ngIf="isSubmitting" class="spinner">hourglass_empty</mat-icon>
      </button>
    </mat-dialog-actions>
  </div>